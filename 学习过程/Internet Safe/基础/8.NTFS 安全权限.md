# NTFS 安全权限

---

学 NTFS 安全权限 的目的是 给文件和文件夹设置权限，这个权限可以限制不同的用户访问不同的权限！

---

[toc]

## 一、NTFS 权限概述

1. 通过设置 NTFS 权限，实现不同的用户访问不同对象（文件和文件夹）的权限。
2. 分配了正确的访问权限后，用户才能访问其资源。
3. 设置权限防止资源被篡改、删除。

## 二、文件系统概述

* 文件系统，即在外部储存设备上组织文件的方法。
* 存储文件的方式叫文件系统。

常用的文件系统：

```shell
FAT -- windows
NTFS -- windows
EXT -- linux 常见
```

### 关于存储的知识

* 当我们新建一个分区，如果不建立文件系统，这个分区是无法存储数据的。那么怎样建立文件系统呢？就是在这个分区上“打格子” --- 这个格子是存储文件的存储单元。有了这个格子，才可以存储数据。这个格子就叫文件系统！
* 格式化：就是把这个分区抹空，然后重新在这个分区上打格子。所以，格式化就是制作文件系统。格式化的时候选择文件系统类型，就是选择格子的类型。
* 存储的时候，每个格子只能给一个文件用，就算格子装不完，也会另起一个新的格子去存储。所以可能存的越多数据，浪费的空间越多；那么是不是格子越小越好呢？不是！因为越小的话，一个文件的指向格子指针就越多，打开文件就越慢！但是格子小对存储空间的利用率就越高。所以，放大文件，格子越大越好；放小文件，格子越小越好。

## 三、修改 NTFS 权限

### 3.1 取消权限继承

* 作用：取消后，可以任意修改权限列表了。（因为被操作的文件夹的ACL表，即权限。是从父文件夹那里继承过来的。需要取消继承才能脱离父文件夹的“控制”）

* 方法：文件夹右键属性 --- 安全 --- 高级 --- 去掉第一个勾 --- 选择复制即可。（注：在去掉第一个勾后，会弹出另外一个框，意思是你跟你父亲脱离关系了，父亲给你的东西你留着，还是删掉）

  ![看不见图片是科学问题](https://raw.githubusercontent.com/yiyah/Picture_Material/master/20200302003913.png)

### 3.2 文件及文件夹权限

* 特别的权限：就是 A 用户有没有给 B 用户开通权限 的权限。

![看不见图片是科学问题](https://raw.githubusercontent.com/yiyah/Picture_Material/master/image-20200302004921179.png)

![看不见图片是科学问题](https://raw.githubusercontent.com/yiyah/Picture_Material/master/20200302012629.png)

### 3.3 权限累加

当用户同时属于多个组时，权限是累加的。即假如用户属于 A 组，他的权限是 自身权限+A组给他的权限。

### 3.4 拒绝最大

当权限累加的时候，（相同权限）累加遇到允许和拒绝，拒绝最大，则拒绝；

例如：组 AS 中，对某文件夹拥有完全控制权限，但是不想 a 用户访问这个文件夹，则只需在访问控制表中添加 a 用户，并修改它的权限为拒绝，那么组 AS 其他人还可以访问，但用户 a 访问不了！

### 3.5 取得所有权

* 这种是针对 A 用户把文件夹权限只留自己，其他任何人都访问不了。但是如果 A 走了，这个文件夹就不能访问了？非也！管理员可以对该文件夹 取得所有权。即更改 文件夹 的 所有者。

默认只有 administrator 有这个权限！

操作：当某用户把文件夹的访问控制表中只剩下自己的时候，用管理员账户登陆系统。右键文件夹 --- 属性 --- 安全 --- 高级 --- 所有者 --- 选中管理员 --- 勾上选项【替换子容器及对象的所有者】 --- 确定

### 3.6 强制继承

* 作用：强制继承父子关系
* 方法：文件夹右键属性 --- 安全 --- 高级 --- 勾上【用在此显示的可以应用到子对象的项目替代所有子对象的权限项目】（注意：不同操作系统可能描述的不一样，但总的意思就是我和我儿子的关系！上面选项的意思就是我和我父亲的关系！）

## 复制文件、移动文件 对权限的影响

* 复制
  文件复制后，文件的权限会被目标文件夹的权限覆盖。
* 移动
  只有同分区的文件移动，才不会被目标文件夹的权限覆盖；不同分区的文件会被覆盖！
  比如：D 盘下的文件在D盘下怎么移动都好，被移动的文件始终会保留原来的权限。但是 从 D 移动到 C，被移动的文件会被 目标文件夹 的权限 覆盖。

## 四、小结

1. 复制文件，都覆盖。
2. 移动文件，跨分区：权限覆盖；同分区：权限保留。

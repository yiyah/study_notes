# 飞控解锁

---

Creation Date: 2020-09-02

---

## 解锁

飞控要解锁，最少需要以下操作

1. 罗盘校准（即指南针）
2. 遥控器校准
3. 加速度计校准
4. 按下安全开关至常亮

当你实在没办法，老是弹出 `BAD AHRS` 等错误，你可以尝试一下：

* 在 参数表 里面搜索 `ARMING_CHECK` 设置为 0 ，即可解锁前不检查相关外设的状态，从而实现跳过错误解锁。
* 搜索 `BRD_SAFETYENABLE`，设置为 0，即可取消安全开关。
* 但是还是要做 遥控器校准，因为要用遥控器解锁。（飞行模式选择 hold）

## 遥控器控制

* 型号：WFT09Ⅱ

首先，按照参考2，设置遥控器的开关作为飞控的模式选择按钮。飞行模式有 hold，manual 就可以了。（hold 用来解锁，解锁完换到 manual 用遥控器控制）
然后，还是要校准电调，在解锁了的情况下，可以使用遥控器来校准。
校准完后，即可推动油门进行电机的控制。

## 问题

1. 用遥控器校准电调时，嘟嘟两声（即确认了油门高点）后没反应

    问题原因：遥控器的 pwm 输出范围太小，如我的遥控器，输出范围只有 7.5% ~ 9.5%。
    解决方法：
    * **法一：** 打开 `Mission planner`，【初始设置】-->【必要硬件】-->【Servo Output】，找到 `throttle`，把 `trim` 改到和 `min` 一样的值。你会发现这才是实际遥控器输出的 PWM 范围（变成了 5.5% ~ 9.5%）（估计是一种需要你把油门推到一半电机才转的措施）

        ![看不到图片是科学问题](https://raw.githubusercontent.com/yiyah/Picture_Material/master/2020-09-04_16-21-23.png)

    * **法二：** 打开遥控器的设置，找到【舵角设置】，把【油门】的量程弄到最大（注意地面站要重新校准）。PWM 范围变成了 5.1% ~ 10.1%。（注意看看法一提到的【Servo Output】的值有没有更新，没有的话还要自己手动输入）

2. 解锁后，推动油门，示波器的波形不变。

    ① 注意有没有把 Hold 模式 切换到 manual。
    ② 有没有按 安全开关 至常亮。

## 参考

1. [QGroundControl v2.97 关闭安全开关 和解锁前自检](http://www.playuav.com/question/616)
2. [天地飞9设置Pixhawk飞控的六段飞行模式，只用一个通道](http://bbs.5imx.com/forum.php?mod=viewthread&tid=1432113)(遥控器设置)

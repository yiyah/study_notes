## 一、基础控件

---

Resources View 里的拓展属性的风格是通用的！

每个控件都有各自的拓展属性，需要代码实现。如比：`pList ->SetExtendedStyle(params)`

---

[toc]

### 1.1 Picture 控件

几乎只用于显示一个不动的图片、图标或者边框。

*   关联 CStatic class
*   Type
    1.  frame：边框显示。通常 把它的高改为最小，作为分隔栏使用。
    2.  Rectangle：填充内部。
    3.  icon：图标
    4.  Bitmap

### 1.2 Static Text 静态文本控件 

单选控件

*   关联 CStatic class
*   Styles
    1.  No prefix：不显示下划线。这个是在 “Caption” 里填写如：“工号(&N)”，勾选就不显示下划线。
    2.  No wrap：不自动换行。比如：“Caption”的内容太长了，勾选就不换行。如果选了垂直居中也不换行。
    3.  Simple：禁用 “Align text” 和"No wrap" 
    4.  Notify：该控件支不支持消息反射（就是说发生在该控件的一个点击事件，本应该只在该控件内截获，勾选了父窗口也能截获）

### 1.3 Edit Box控件

*   关联 CEditclass

*   style
    1.  No hide selection：焦点离开 Edit 控件后，继续选中高亮内容。
    2.  Want return：按 回车 换行，要不然是 Ctrl + 回车 换行。
    
*   拓展使用：

    ```c++
    GetDlgItem(IDC_EDIT) ->SetFocus();
    ```

    

### 1.4 button 控件

*   关联 CButton
*   style
    1.  Icon：设置后，该按钮只能显示图片。
    2.  Owner draw： 自绘。图标文字可以放一起。=====================待补充=========================
    3.  Flat：扁平化设计

### 1.5 List Control 控件

列表控件

*   关联 CListCtrl
*   Style
    1.  View ：一般选 Report
    2.  Show selection always：一般勾选




### 1.6 Radio button 控件

单选按钮

*   关联 CButton
*   General
    1.  Group：组长，代表整个组员。单选按钮必须要有一个组长。（组长的ID一般对应这个组的属性集合：Country）
*   Style
    1.  Push-like：另一种样式。

### 1.7 group box 控件

分组控件

*   关联 CButton

### 1.8 check box 控件

复选按钮，里面一般放单/多选按钮。并没有实际作用，好看而已。

*   关联 CButton
*   styles
    1.  Tri-state：选中的状态有三种。默认情况下，只有两种，勾选和不勾选。

### 1.9 Combo box

组合框（这么叫可能是最早的时候，基于编辑框+列表组合而成）

*   在显示不全的时候，可以把combobox 的列表拉长一点。太长的话它会根据数据的长度，自动调整。太短就不行。
*   Data：在这里可以设置下拉菜单选择的文字。
*   Style：
    1.  Simple：很少使用。
    2.  Dropdown：下拉。可以编辑，可以下拉。
    3.  DropList：只有下拉。不能编辑。
    4.  sort：排序。一般取消。
    5.  Vertical scrool：当 “Data” 的内容太多了，显示不完全，生成一个滚动条。
    6.  No integral height：结合“Vertical Scrool”  使用。就是下拉的时候一行行显示，一般不勾选。不然最后留有空白。





## 二、每一个控件如何与一个 MFC 控件类的对象关联

### 方法一：该方法返回的指针是临时性的，不能长期保存。

```c++
CListCtrl *pList = (CListCtrl *)GetDLgItem(IDC_LIST);
```

### 方法二：该方法可以长期使用

```C++
a) CWnd::Attach: 将一个句柄嫁接到一个个 CWnd 类型变量中;
b) CWnd::Detach: 移除嫁接到 CWnd 变量中的句柄;
c) CWnd::SubclassWindow: 子类化一个窗口句柄到 CWnd 派生类变量中;
（不但要把句柄关联进入cW对象中,而且还要将窗口的消息映射到 CWnd 的子类中）
d) CWnd::UnsubclassWindow: 解除子类化;
e）CWnd::SubclassDlgItem: 根据窗口ID子类化对应的窗口。
```

### 方法三（最好用这种）：通过类向导 关联控件 变量

```txt
=========================================具体步骤===================================================
1. 打开 ClassWizard
2. Member Variables 选项卡设置！
注意：有些控件默认关联的是 value（数值型） 的变量，需要修改 Category（种类）为 Control。

=========================================问题=======================================================
问题一：程序什么时候开始关联控件，建立变量的呢？
在对话框初始化 OnInitDialog() 的时候，调用 DoDataExchange() 函数，进行关联的！（注意灰色区域）

问题二：静态文本的控件在哪呢？
默认静态文本的 IDC_STATIC  是不显示的。把 ID 改一下就可以了。

问题三：Radio Button (单选按钮) 不显示？
Radio Button 如果不勾选 属性 group ，类向导 也是不显示的。（因为单选框时一组组的，复选框可以单独自己）
```



## 三、关联变量的种类

#### 3.1 数值型关联变量

这是什么？一般来说在代码中关联变量（其实是之前没学到），关联控件的变量 是 控件类 的类型。但是在类向导里却有int 型的。为什么呢？<s>想一想，设计一个计算器，每个按钮就是一个数字嘛。如果给这些按钮 关联控件型的变量，岂不是每次按一下，都要消息映射，（程序说：噢！你按了这个按钮，它对应的是数字 5 ），然后赋值给一个成员变量保存用户的操作吗？那这么多数字，这么多按钮，这么多消息映射，好吗？（当然你喜欢的话，也可以）。</s> （上面这个例子举错了）编辑框里，如果你想要的到的是数字，建立控件型的关联变量，每次为了得到用户输入的数字，都要GetDlgItemInt()。但是，数值型的关联变量，就可以直接把数值赋值到这个变量里了。

于是，就有了这个 数值型的关联变量。（有些控件如单选按钮，几乎只能用数值型关联变量进行管理，很难使用控件型关联变量）

```c++
// 怎么使得 编辑框的数值 赋值 到 关联的变量了？是自动赋值的吗？噢，宝贝，不是的。是要执行以下函数：
UpdateData(BOOL);
/*
作用：对数值型关联变量进行数据的更新或输出到界面。
参数说明：
	TRUE：从界面从输入数据到关联的成员变量
	FALSE：从关联的成员变量的数值输出到界面
缺点：执行 UpdateDate() 函数，会对 所有 数值型关联变量 进行更新或输出。不能对单独一个控件操作。（这是因为UpdateData()  调用了 DoDataExchange() ）

*/

// 初始化的时候，怎么让控件显示默认值？
// 首先，默认值在 对话框类 的构造函数 中初始化。
// 其次，调用关系：OnInitDlalog() 调用 UpadateData(FALSE) 去执行 DodataExchange() 进行编辑框的初始化（输出默认值）


```

#### 3.2 BOOL 型





## 总结：

**1. 控件型关联变量**

*   任何 VC 内部的 windows基础控件，都有一个固定的控件类可以与之建立控件型关联变量。
*   有一些控件类是多种控件公用的，例如：按钮，单选按钮和复选框，分组控件等等共用 CButton 类。
*   一部分控件不但可以建立控件型关联变量，还可以建立数值型关联变量。

**2. 数值型关联变量**

*   UpdateData 代入的是 TRUE 代表从界面中输入数据到关联的成员变量。
*   UpdateData 代入的是 FALSE 代表将关联的成员变量的数值输出到界面上。
*   一个 UpdateData 函数的调用会对所有数值型关联变量进行更新或输出。
*   这是因为UpdateData调用了DoDataExchange函数，所以不能单独对一个控件操作。
*   如果要对单一控件操作就最好不使用UpdateData函数，可以建立控件型关联变量
    或调用GetDlgItem函数。
*   有些控件例如单选按钮，几乎只能使用数值型关联变量来管理，很难使用控件型关联变量管理。

**3. 在对话框类中基类中有两处自动调用UpdateData函数的地方：**

*   在对话框初始化（CDialog::OnInitDialog）时，内部调用UpdateData(FALSE)将数据更新到界面上。

*   在对话框以确定方式关闭（CDialog::OnOK）时，内部调用UpdateData(TRUE)将数据从界面更新关联的内存变量中。

*   数值型关联变量的生命期比较长：

    a)在对话框弹出之前可以给关联变量赋值，对话框启动后会显示赋值后的关联变量的数值。
    b)在OnOK关闭对话框过程中界面的数据会更新到关联变量中，对话框关闭后关联变量的数值仍然可用。
    c)如果是控件型关联变量在对话框启动前和对话框关闭后，统统不能使用可能会造成程序崩溃。

**4. 补充说明：**

*   在 类向导里建立的关联变量只要是 value 类型的，都会被 UpadateData() 更新数据。并不是只有数值型的才会更新！